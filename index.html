<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Presentación Zen alta disponibilidad y alto rendimiento</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/white.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<section>
                        <h1>Zen alta disponibilidad y alto rendimiento</h1>
                        <h3>18 Octubre 2025</h3>
                        <p>
                            <small>Pablo Martín - CTO Joinup</small>
                        </p>
                    </section>
				</section>

				<section>
					<section>
						<h1>1. Un poquito de intro</h1>
					</section>
					<section>
						<h2>¿Donde trabajo?</h2>
						<ul>
							<li class="plain fragment">Joinup</li>
							<li class="plain fragment">Empresas más importantes (nacional / internacional)</li>
							<li class="plain fragment">Servicios de movilidad:
								<ul>
									<li class="plain fragment">Taxi</li>
									<li class="plain fragment">Reservas de parking</li>
									<li class="plain fragment">Recarga eléctrica</li>
									<li class="plain fragment">Kilometraje (solo para empresas)</li>
									<li class="plain fragment">Etc</li>
								</ul>
							</li>
						</ul>
					</section>
					<section>
						<h2>No somos creidos, somos crédulos</h2>
						<ul>
							<li class="plain fragment">App Store: 4,9</li>
							<li class="plain fragment">Google Play: 5,0</li>
						</ul> 
						<img width="1200" height="242" style="margin-bottom: 0" data-src="images/ratings.png" class="fragment">
						<img width="1200" height="242"  style="margin-bottom: 0; margin-top: -257px; display: block; margin-left: auto; margin-right: auto;" data-src="images/ratings-2025.png" class="fade-in fragment">
					</section>
					<section>
						<video height="650px" controls style="border-top: 3px solid black; border-bottom: 3px solid black;">
							<source src="videos/demo-joinup.mp4" type="video/mp4">
						</video>
					</section>
					<section>
						<h2>¿Qué es alta disponibilidad?</h2>
						<p>Es la capacidad de garantizar la continuidad de los servicios, incluso en situaciones de deficiencias...</p>
					</section>
					<section data-background="images/yawns.gif" data-background-color="#000000" data-background-transition="zoom">
						<h2>Bostezo universal</h2>
					</section>
					<section>
						<h2>¿Qué es alta disponibilidad?</h2>
						<p class="plain fragment">Que siempre funcione: 24*365</p>
					</section>
					<section>
						<h2>¿Qué es alto rendimiento / alta carga?</h2>
						<p class="plain fragment">Que sea muy rápido</p>
					</section>
					<section>
						<h2>¿Qué es Zen?</h2>
						<p class="fade-out fragment">Reglas básicas. Fáciles de cumplir</p>
						<p class="fade-in fragment" style="margin-top: -75px">Reglas básicas. Fáciles de (in)cumplir</p>
					</section>
					<section>
						<h2>Hace casi 10 años entré en Joinup</h2>
						<ul>
							<li class="plain fragment">Backend en alta disponibilidad y alto rendimiento</li>
							<li class="plain fragment">Hacer Apps híbridas</li>
							<li class="plain fragment">Nunca había hecho ninguna de las dos cosas Hulio</li>
						</ul>
					</section>
					<section>
						<h2>Programador elegante</h2>
						<ul>
							<li class="plain fragment">Colaborador Django</li>
							<li class="plain fragment">Colaborador KDE</li>
							<li class="plain fragment">Colaborador de muchos proyectos de Software libre</li>
							<li class="plain fragment">Rankings Python Github</li>
						</ul>
					</section>
					<section>
						<h2>Solo se que no se nada</h2>
						<p>
							Realmente no sabía si sabía o no sabía
						</p>
						<img class="r-frame" width="178" height="238" data-src="images/socrates.jpg">
					</section>
					<section>
						<h2>Filosofos del software</h2>
						<p>
							Es una presentación teórica, basada en la práctica
						</p>
					</section>

				</section>
				<section>
					<section>
						<h1>2. Zen de Python</h1>
					</section>
					<section>
						<h4>Bello es mejor que feo</h3>
						<h4 class="plain fragment">Explícito es mejor que implícito</h3>
						<h4 class="plain fragment">Simple es mejor que complejo</h3>
						<h4 class="plain fragment">Complejo es mejor que complicado</h3>
						<h4 class="plain fragment">Plano es mejor que anidado</h3>
						<h4 class="plain fragment">Espaciado es mejor que denso</h3>
					</section>
					<section>
						<h4>La legibilidad es importante</h4>
						<h4 class="plain fragment">Los casos especiales no son lo suficientemente especiales como para romper las reglas</h4>
						<h4 class="plain fragment">Sin embargo la practicidad le gana a la pureza</h4>
						<h4 class="plain fragment">Los errores nunca deberían pasar silenciosamente</h4>
						<h4 class="plain fragment">A menos que se silencien explícitamente</h4>
					</section>
					<section>
						<h4>Frente a la ambigüedad, evitar la tentación de adivinar</h4>
						<h4 class="plain fragment">Debería haber una, y preferiblemente solo una, manera obvia de hacerlo</h4>
						<h4 class="plain fragment">A pesar de que eso no sea obvio al principio a menos que seas Holandés</h4>
						<h4 class="plain fragment">Ahora es mejor que nunca</h4>
						<h4 class="plain fragment">A pesar de que nunca es muchas veces mejor que *ahora* mismo</h4>
					</section>
					<section>
						<h4>Si la implementación es difícil de explicar, es una mala idea</h4>
						<h4 class="plain fragment">Si la implementación es fácil de explicar, puede que sea una buena idea</h4>
						<h4 class="plain fragment">Los espacios de nombres son una gran idea, ¡tengamos más de esos!</h4>
					</section>
				</section>
				<section>
					<section>
						<h1>3. Zen de alta disponibilidad y alto rendimiento</h1>
					</section>
					<section>
						<h2>Identifica tus cuellos de botella</h2>
					</section>
					<section>
						<h2>Uno de los más comunes cuellos de botella son las bases de datos</h2>
					</section>
					<section>
						<h2>En cada petición HTTP debes de conocer, controlar y optimizar el número de consultas que se hacen a las bases de datos</h2>
					</section>
					<section>
						<h2>Como no se pueden comparar peras con manzanas, por cada petición HTTP también hay que conocer, controlar y optimizar el tiempo total que tardan en ejecutarse todas las consultas a las bases de datos</h2>
					</section>
					<section>
						<h2>Las bases de datos relacionales no sirven para todo</h2>
					</section>
					<section>
						<h2>Del mismo modo debes controlar y optimizar el uso que se hace de la memoria en cada petición</h2>
						<h3 class="plain fragment">Si algo hace que suba la memoria… ¡estudialo!</h3>
					</section>
					<section>
						<h2>La memoria es como los ahorros, si tienes memoria disponible en algún momento puedes gastarla en algún capricho</h2>
						<h3 class="plain fragment">Pero aún así no tengas muchos caprichos</h3>
					</section>
					<section data-auto-animate>
						<div>
							<h3>Ejemplo 1</h2>
							<pre>
								<code data-trim data-noescape class="python">
									products = Product.objects.filter(...).order_by('-buy_date')
									if products:
										first_product = products[0]
									else:
										first_product = None
								</code>
							</pre>
						</div>
						<div class="plain fragment">
							<h3>Ejemplo 2</h2>
							<pre>
								<code data-trim data-noescape  class="python">
									products = Product.objects.filter(...).order_by('-buy_date')
									if products.exists():
										first_product = products[0]
									else:
										first_product = None
								</code>
							</pre>
						</div>
						<div class="plain fragment">
							<h3>Ejemplo 3</h2>
							<pre>
								<code data-trim data-noescape  class="python">
									try:
									  fp = Product.objects.filter(...).order_by('-buy_date')[0]
									except Model.DoesNotExist:
									  fp = None
								</code>
							</pre>
						</div>
					</section>
					<section>
						<h2> Por último controla el tiempo global de todas las peticiones.<h2>
					</section>
					<section data-background-image="images/response-time.png" data-background-transition="zoom">
						<h2 class="fade-out fragment">Número de peticiones y tiempo</h2>
					</section>
					<section data-background-image="images/response-time-2025.png" data-background-transition="zoom">
					</section>
					<section data-background-image="images/memory.png" data-background-transition="zoom">
						<h2 class="fade-out fragment">Memoria</h2>
					</section>
					<section data-background-image="images/memory-2025.png" data-background-transition="zoom">
					</section>
					<section>
						<h2> Todas las peticiones a sistemas externos deben tener un timeout</h2>
						<h3 class="plain fragment">Es mejor amputar un brazo que morir de gangrena</h3>
					</section>
					<section>
						<h2> Ten un sistema de tareas en segundo plano para que el primer plano (servidor web) sea lo más rápido posible</h2>
					</section>
					<section>
						<h2> Todas las peticiones a sistemas externos, siempre que sea posible, deben hacerse en segundo plano</h2>
						<h4 class="plain fragment">Y creeme la gran mayoría de las peticiones se pueden hacer en segundo plano. Puede que el usuario final pierda algo de información pero ganará un sistema robusto</h4>
					</section>
					<section>
						<h2> Conoce, controla y optimiza en segundo plano lo mismo que en primer plano</h2>
					</section>
					<section data-background-image="images/memory-background.png" data-background-transition="zoom">
						<h2 class="fade-out fragment"> Memoria</h2>
					</section>
					<section data-background-image="images/memory-background-2025.png" data-background-transition="zoom">
					</section>
					<section>
						<h2> No incumplas ninguna de estas normas por más que te tienten con una razón no técnica</h2>
						<h3 class="plain fragment">Si la razón es técnica, reflexionala durante el tiempo suficiente</h3>
					</section>
					<section data-background-color="orange">
						<h2>No creo que los Holandeses sean superhombres, pero mi color favorito es el naranja</h2>
					</section>
					<section>
						<h2>Si eres el responsable del backend, tu jefe a partir de ahora será el backend. El podrá despedirte mucho antes que cualquier otra persona de la empresa</h2>
					</section>
				</section>
				<section>
					<section>
						<h1> 4. Implementación del Zen </h1>
					</section>
					<section>
						<h2> Servidor web:</h2>
						<h4 class="plain fragment"> Python 3.13.2 / Django 5.1.7 / DRF 3.15.2</h4>
					</section>
					<section>
						<h2> Sistema de tareas en segundo plano:</h2>
						<h4 class="plain fragment"> Python 3.13.2 / Celery 5.4.0 </h4>
					</section>
					<section>
						<h2> Base de datos relacional:</h2>
						<h4 class="plain fragment"> Postgresql 15.13</h4>
					</section>
					<section>
						<h2> Base de datos no relacional:</h2>
						<h4 class="plain fragment"> Mongodb 7.0.24</h4>
					</section>
					<section>
						<h2> Base de datos en memoria:</h2>
						<h4 class="plain fragment"> Redis 7.2.10</h4>
					</section>
					<section>
						<h2> Middlewares:</h2>
						<h4 class="plain fragment"> Número de peticiones a las BBDD </h4>
						<h4 class="plain fragment"> Tiempo de peticiones a las BBDD </h4>
						<h4 class="plain fragment"> Memoria </h4>
						<h4 class="plain fragment"> Tiempo global </h4>
					</section>
					<section>
						<h2> Decorador que informa de cada tarea de Celery:</h2>
						<h4 class="plain fragment"> Número de peticiones a las BBDD </h4>
						<h4 class="plain fragment"> Tiempo de peticiones a las BBDD </h4>
						<h4 class="plain fragment"> Memoria </h4>
						<h4 class="plain fragment"> Tiempo global </h4>
					</section>
					<section>
						<h2> Timeouts peticiones externas </h2>
						<h4 class="plain fragment"> Prioridad alta: 15 segundos </h4>
						<h4 class="plain fragment"> Prioridad media: 10 segundos </h4>
						<h4 class="plain fragment"> Prioridad baja: 5 segundos </h4>
					</section>
					<section>
						<h2> Tests</h2>
						<h4 class="plain fragment"> Se controlan el número de peticiones en cada test </h4>
						<h4 class="plain fragment"> Se ejecutan con estos Middlewares </h4>
					</section>
				</section>
				<section>
					<section>
						<h2> Contacto:</h2>
						<h4 class="plain fragment"> <a href="mailto: talento@joinup.es" style="text-transform: none">talento@joinup.es </a></h4>
					</section>
					<section data-background="images/what.gif">
						<h2>¿?</h2>
					</section>
				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
